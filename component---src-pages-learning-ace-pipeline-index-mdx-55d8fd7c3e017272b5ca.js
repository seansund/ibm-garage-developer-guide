(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"4Om1":function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return o})),a.d(t,"default",(function(){return h}));var n=a("wx14"),i=a("zLVn"),r=(a("q1tI"),a("7ljp")),p=a("XbGe"),l=a("T0C+"),o=(a("qKvR"),{}),c=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",t)}},b=c("PageDescription"),s=c("Tabs"),m=c("Tab"),d={_frontmatter:o},g=p.a;function h(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(r.b)(g,Object(n.a)({},d,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)(b,{mdxType:"PageDescription"},Object(r.b)("p",null,"Learning tasks for developers to understand the IBM middleware integration use cases on Red Hat OpenShift.")),Object(r.b)("h3",null,"Learning Tasks"),Object(r.b)("p",null,"This set of learning tasks focuses on using IBM middleware on Red Hat OpenShift."),Object(r.b)("h2",null,"Self-paced agenda to build and deploy an App Connect REST API workflow"),Object(r.b)("p",null,"This activity provides a working example of a Tekton based CICD pipeline to build and deploy an App Connect application invoking the REST API of the ",Object(r.b)("a",{parentName:"p",href:"https://github.com/ibm-garage-cloud/inventory-management-svc-solution"},"Inventory Management Service"),".\nThe Pipeline and Task resources available in the ",Object(r.b)("a",{parentName:"p",href:"https://cloudnativetoolkit.dev/"},"Cloud Native Toolkit")," can be used as a starting point to build BAR files for other ACE workflows."),Object(r.b)("p",null,"The activity consists of the following tasks:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",{parentName:"li",href:"#prerequisites"},"Prerequisites")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",{parentName:"li",href:"#deploy-the-backend-inventory-management-service"},"Deploy the Inventory Management Service")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",{parentName:"li",href:"#configure-the-app-connect-workflow"},"Configure the App Connect workflow with the Inventory REST API URL")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",{parentName:"li",href:"#execute-the-app-connect-pipeline"},"Execute the the App Connect pipeline to build and deploy the configured workflow"))),Object(r.b)("h3",null,Object(r.b)("strong",{parentName:"h3"},"Prerequisites")),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",align:null},"Task"),Object(r.b)("th",{parentName:"tr",align:null},"Instructions"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},"Active OpenShift 4.x Cluster"),Object(r.b)("td",{parentName:"tr",align:null})),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},"Set up accounts and tools"),Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("a",{parentName:"td",href:"/getting-started/prereqs"},"Instructions"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},"Install the Cloud Native Toolkit"),Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("a",{parentName:"td",href:"https://cloudnativetoolkit.dev/getting-started-day-0/install-toolkit/quick-install"},"Install the Cloud Native Toolkit"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",align:null},"Install IBM Cloud Pak for Integration"),Object(r.b)("td",{parentName:"tr",align:null},Object(r.b)("a",{parentName:"td",href:"https://www.ibm.com/docs/en/cloud-paks/cp-integration/2020.4?topic=installing"},"Install Cloud Pak for Integration v2020.4"))))),Object(r.b)("h3",null,Object(r.b)("strong",{parentName:"h3"},"Deploy the backend Inventory Management Service")),Object(r.b)("p",null,"The image below depicts the Tekton pipeline executed."),Object(r.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(r.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"66.31944444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlElEQVQ4y6VTyXKCQBD1/7/HVDxluXnwlOUQg1WJxqoglDgw4zAbLz0NKKi3DPVoeD396GWYpIVGqSxq62FdYGjjoeoO2jEkWwulDPGu422L+F63eyZR6HJFUecMmiZ0TMN3rxTUy/uIGz4biptEZaaahsGB3uNzLVDK+uRj3jkYEu2lxCFDSehFY3K3BUOD31xC3/C1723mVfqM8vepI8O1YAiBrfUNtJKUkR21oheOl5QSpRAoij2qqmI/C2rTC7ZBxhiUR4k02eJYKgRyeOe5DfGDQ3gf7Tl7FtzuJdaFYCJZJfhYfsAEi0OhYK07ZR4x7OdwGCPBr8piKdvSHp4eMZvd87Y9laL18bQ5z3MIIUYCpxYMBeuu5LiUpGNBU6RKqMww6p+jCV9meWmvhnI+hx65THGsJabTO2p8gfl8jsViwf5+eDczjCeeN3GvWmdNvSvrA51DgdfXN2RZjiRZUX+XneBYLDR9HAnai9L+s+KHJt+pxO6gEf/piB1hmyusdxI/mcKG7CbaTPJz5G6ii/kDqTj2r7nRVbsAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(r.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Tekton pipeline",title:"Tekton pipeline",src:"/static/b76cf9eefda4c06b030fc54907935e0c/3cbba/CNTK-ACE-Pipelines_v1.0-Inventory-App.png",srcSet:["/static/b76cf9eefda4c06b030fc54907935e0c/7fc1e/CNTK-ACE-Pipelines_v1.0-Inventory-App.png 288w","/static/b76cf9eefda4c06b030fc54907935e0c/a5df1/CNTK-ACE-Pipelines_v1.0-Inventory-App.png 576w","/static/b76cf9eefda4c06b030fc54907935e0c/3cbba/CNTK-ACE-Pipelines_v1.0-Inventory-App.png 1152w","/static/b76cf9eefda4c06b030fc54907935e0c/e8601/CNTK-ACE-Pipelines_v1.0-Inventory-App.png 1493w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Open a terminal and log into your OpenShift cluster.  For IBM Cloud, navigate to your cluster in the ",Object(r.b)("em",{parentName:"p"},"IBM Cloud console"),", click on the ",Object(r.b)("strong",{parentName:"p"},"Access")," tab, and follow the\ninstructions to log in to the cluster from the command line.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a development namespace."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"oc sync ${DEV_NAMESPACE} --dev\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Open the Developer Dashboard."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"oc dashboard\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"From the Developer Dashboard, click on ",Object(r.b)("strong",{parentName:"p"},Object(r.b)(l.a,{name:"templates",mdxType:"Globals"}))," tab.  Click on the ",Object(r.b)("strong",{parentName:"p"},"Inventory Service")," tile to create your app github repository from the\ntemplate repository selected. You can also click on the ",Object(r.b)("strong",{parentName:"p"},"Git Icon")," to browse the source template repository and click on the ",Object(r.b)("strong",{parentName:"p"},"Template")," to create the template.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Complete the ",Object(r.b)("a",{parentName:"p",href:"https://help.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-from-a-template"},"GitHub create repository from template")," process."),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Owner"),": Select a validate GitHub organization that you are authorized to create repositories within or the one you were given for the shared cluster (See warning above)"),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Repository name"),": Enter a valid name for you repo, GitHub will help with showing a green tick if it is valid (See warning above)"),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Description"),": Describe your app"),Object(r.b)("p",{parentName:"li"},"Press ",Object(r.b)("strong",{parentName:"p"},"Create repository from template")," and the new repository will be created in your selected organization.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"With the browser open to the newly created repository, click on ",Object(r.b)("strong",{parentName:"p"},"Clone or download")," and copy the clone ",Object(r.b)("em",{parentName:"p"},"SSH link"),", and use the ",Object(r.b)("inlineCode",{parentName:"p"},"git clone")," command to clone it to your developer desktop machine."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"git clone git@github.com:{gitid}/inventory-management-svc-solution.git\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Change into the cloned directory."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"cd inventory-management-svc-solution\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Set a basepath for the REST API for the Inventory Management Service."),Object(r.b)(s,{mdxType:"Tabs"},Object(r.b)(m,{label:"OpenShift 4.0 - 4.5",mdxType:"Tab"},Object(r.b)("br",null),Object(r.b)("ol",{parentName:"li"},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Edit ",Object(r.b)("strong",{parentName:"p"},"src/main/resources/application.yml")," and update the ",Object(r.b)("em",{parentName:"p"},"server")," section to include the ",Object(r.b)("inlineCode",{parentName:"p"},"/api")," base path to ",Object(r.b)("em",{parentName:"p"},"server.servlet.context-path"),"."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},'server:\n  port: ${PORT:9080}\n  servlet:\n    context-path: "/api"\n')))),Object(r.b)("br",null),Object(r.b)("ol",{parentName:"li",start:2},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Edit the file ",Object(r.b)("strong",{parentName:"p"},"chart/base/values.yaml")," and set the ",Object(r.b)("em",{parentName:"p"},"route.path")," from ",Object(r.b)("inlineCode",{parentName:"p"},"/")," to ",Object(r.b)("inlineCode",{parentName:"p"},"/api"),"."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},'route:\n  enabled: false\n  rewriteTarget: "/"\n  path: "/api"\n'))))),Object(r.b)(m,{label:"OpenShift 4.6+",mdxType:"Tab"},Object(r.b)("br",null),Object(r.b)("ol",{parentName:"li"},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Edit the file ",Object(r.b)("strong",{parentName:"p"},"chart/base/values.yaml")," and set the ",Object(r.b)("em",{parentName:"p"},"route.path")," from ",Object(r.b)("inlineCode",{parentName:"p"},"/")," to ",Object(r.b)("inlineCode",{parentName:"p"},"/api"),"."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},'route:\n  enabled: false\n  rewriteTarget: "/"\n  path: "/api"\n'))))))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Set the namespace context."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"oc project {DEV_NAMESPACE}\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Register the App in a DevOps Pipeline"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"  oc pipeline\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Select the ",Object(r.b)("strong",{parentName:"p"},"Tekton")," pipeline type.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"The first time a pipeline is registered in the namespace, the CLI will ask for your username and\n",Object(r.b)("strong",{parentName:"p"},"Personal Access Token")," for the Git repository.  The credentials will be stored in a secret named ",Object(r.b)("inlineCode",{parentName:"p"},"git-credentials"),". It will use the current branch."),Object(r.b)("p",{parentName:"li"},"  ",Object(r.b)("strong",{parentName:"p"},"Username"),": Enter your GitHub user id"),Object(r.b)("p",{parentName:"li"},"  ",Object(r.b)("strong",{parentName:"p"},"Personal Access Token"),": Paste your GitHub personal access token")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"When registering a ",Object(r.b)("inlineCode",{parentName:"p"},"Tekton")," pipeline, you will also be prompted to select which pipeline you want to use for your application. Select ",Object(r.b)("inlineCode",{parentName:"p"},"ibm-java-gradle"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Select ",Object(r.b)("inlineCode",{parentName:"p"},"Y"),"/",Object(r.b)("inlineCode",{parentName:"p"},"n")," to enable the pipeline to scan the image for vulnerabilities.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Provide ",Object(r.b)("inlineCode",{parentName:"p"},"/api/health")," as the health endpoint.  This is needed by the pipeline when running the ",Object(r.b)("strong",{parentName:"p"},"health")," Task.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"After the pipeline has been created, the command will set up a webhook from the Git host to the pipeline event listener."),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Note:")," If the webhook registration step fails it is likely because the Git credentials are incorrect or do not have enough permission in the repository."),Object(r.b)("p",{parentName:"li"},"The pipeline will be registered in your development cluster and a pipelinerun will be started.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"View your application pipeline."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"oc console\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"From menu on the left switch to the ",Object(r.b)("strong",{parentName:"p"},"Developer")," mode and select the ",Object(r.b)("em",{parentName:"p"},"dev")," project that was used for the application pipeline registration.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In the left menu, select ",Object(r.b)("em",{parentName:"p"},"Pipelines")," and click on the link to the ",Object(r.b)("inlineCode",{parentName:"p"},"inventory-management-svc-solution-xxxxxx")," PipelineRun (PLR).")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Validate the REST API of the Inventory Management service is working correctly in the terminal."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"curl https://$(oc get route inventory-management-svc-solution -o jsonpath='{ .spec.host }')/api/stock-items\n")),Object(r.b)("p",{parentName:"li"},"The response should be similar to the following output."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre"},'[{"name":"Item 1","id":"1","stock":100,"price":10.5,"manufacturer":"Sony"},{"name":"Item 2","id":"2","stock":150,"price":100.0,"manufacturer":"Insignia"},{"name":"Item 3","id":"3","stock":10,"price":1000.0,"manufacturer":"Panasonic"},{"name":"Item 4","id":"4","stock":9,"price":990.0,"manufacturer":"JVC"}]\n')))),Object(r.b)("p",null,"Here is a view of a completed and successful pipelinerun.\n",Object(r.b)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(r.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"10.416666666666668%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAW0lEQVQI1zWKSw7AIAhEe/+bKqBpqhHqYopYF5M3v4uYkHJCaw/sNagq1HTTZWYYOv5uRBfZZXb85pwTV70rlrgwpIqTgiQUKrUgcYo+S45f9kzuz7Z+a+u94wPFq5kngRuIGAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(r.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Tekton pipeline",title:"Tekton pipeline",src:"/static/c6cd842e17280517c0902bf20cb3ee86/3cbba/CNTK-Inventory-Pipeline.png",srcSet:["/static/c6cd842e17280517c0902bf20cb3ee86/7fc1e/CNTK-Inventory-Pipeline.png 288w","/static/c6cd842e17280517c0902bf20cb3ee86/a5df1/CNTK-Inventory-Pipeline.png 576w","/static/c6cd842e17280517c0902bf20cb3ee86/3cbba/CNTK-Inventory-Pipeline.png 1152w","/static/c6cd842e17280517c0902bf20cb3ee86/36072/CNTK-Inventory-Pipeline.png 1667w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    ")),Object(r.b)("h3",null,Object(r.b)("strong",{parentName:"h3"},"Configure the App Connect workflow")),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Download and install the ",Object(r.b)("a",{parentName:"li",href:"https://www.ibm.com/support/knowledgecenter/SSTTDS_11.0.0/com.ibm.etools.mft.doc/get-started-handson.html"},"ACE Toolkit")," and follow steps 1 and 2."),Object(r.b)("li",{parentName:"ol"},"Fork the ",Object(r.b)("a",{parentName:"li",href:"https://github.com/ibm-garage-cloud/inventory-mgmt-ace-solution"},"inventory-mgmt-ace-solution")," repository.  The new repository will be created in your selected organization."),Object(r.b)("li",{parentName:"ol"},"With the browser open to the newly created repository, click on ",Object(r.b)("strong",{parentName:"li"},"Clone or download")," and copy the clone ",Object(r.b)("em",{parentName:"li"},"SSH link"),", and use the ",Object(r.b)("inlineCode",{parentName:"li"},"git clone")," command to clone it to your developer desktop machine.",Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"git clone git@github.com:{gitid}/inventory-mgmt-ace-solution.git\n"))),Object(r.b)("li",{parentName:"ol"},"Change into the cloned directory",Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"cd inventory-mgmt-ace-solution/workspace/InventoryManagementSvc\n"))),Object(r.b)("li",{parentName:"ol"},"Obtain the URL of the Inventory Management SVC route.",Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"echo $(oc get route inventory-management-svc-solution -o jsonpath='{ .spec.host }')\n"))),Object(r.b)("li",{parentName:"ol"},"Search and replace the placeholder ",Object(r.b)("inlineCode",{parentName:"li"},"INVENTORY_MANAGEMENT_SVC_BASE_URL")," with the Route URL in the ",Object(r.b)("em",{parentName:"li"},"listStockItemsUsingGET.subflow")," and ",Object(r.b)("em",{parentName:"li"},"ace-inventory-management-svc.json")," files."),Object(r.b)("li",{parentName:"ol"},"Commit and push the changes into your forked repository.")),Object(r.b)("h3",null,Object(r.b)("strong",{parentName:"h3"},"Execute the App Connect pipeline")),Object(r.b)("p",null,"The image below depicts the Tekton pipeline executed."),Object(r.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(r.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"66.31944444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABn0lEQVQ4y62TTW/bMAyG/f9/zQrksPYwDNglh5zaHNqsHba2SRrbmSVHtL4svxVlOUiDFliBEXghkjIfiZJc7BoNSQ7G9bB+lLY9yGRpD5VF2oHIxrxP+RSzODbjN4V1AcmGAZPZCO+9i6mAU+uJQNfLHA0nM6NvfUCxqQW2+yYl6rpGVdXJv/vdQB5M+nj16xHVXkQ3wCo6oqSo0EZNUO6yeGgdlq1Jqa9Xl7i4+JJ8oQJ8P5b+uC2xrigXOWjdgfcuNt9wePmeeWEEdrH3ycqyxGazhvY2tzHgoBT2TQMhBIwx+XSGpGPD2U9AysAp2XUdZHfAy89nkFQIceXee4QQ3kB4MQ5HfQCc1MdW21bDxxvnOIQhAU8XPq/5EMjm4m1RRxHsjzm+MCnl51qeJvjZbLc7kKJjkc9tn+/yn4C8w79UobOE2WyGJl7KfD7HYrFI89N5vt+yHoGBz2oYD9o4D6kFWiVxc7NMb/P+/gF3q1UGvoWFPCYg7+Z/GS9U/NkplEKD/2lWGbWuCY+lwnN8zE9xfOKxUsnn3LvKNa9+w/VBqev9KwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(r.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Tekton pipeline",title:"Tekton pipeline",src:"/static/06c323f9d024e234b9617b4f6dcc8536/3cbba/CNTK-ACE-Pipelines_v1.0-ACE-App.png",srcSet:["/static/06c323f9d024e234b9617b4f6dcc8536/7fc1e/CNTK-ACE-Pipelines_v1.0-ACE-App.png 288w","/static/06c323f9d024e234b9617b4f6dcc8536/a5df1/CNTK-ACE-Pipelines_v1.0-ACE-App.png 576w","/static/06c323f9d024e234b9617b4f6dcc8536/3cbba/CNTK-ACE-Pipelines_v1.0-ACE-App.png 1152w","/static/06c323f9d024e234b9617b4f6dcc8536/e8601/CNTK-ACE-Pipelines_v1.0-ACE-App.png 1493w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Create a Secret containing the IBM Entitled Registry credentials to pull the ACE image for the CI process in the pipeline."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},'oc create secret generic ibm-entitled-registry --type="kubernetes.io/basic-auth" --from-literal=username=cp --from-literal=password=<IBM Entitlement Key>\n'))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Register the App in a DevOps Pipeline"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"  oc pipeline\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Select the ",Object(r.b)("inlineCode",{parentName:"p"},"Tekton")," pipeline type.  You should not be prompted for Git credentials as a Secret already exists with your username and token.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"When registering a ",Object(r.b)("inlineCode",{parentName:"p"},"Tekton")," pipeline, you will also be prompted to select which pipeline you want to use for your application. Select ",Object(r.b)("inlineCode",{parentName:"p"},"ibm-ace-bar"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Select ",Object(r.b)("inlineCode",{parentName:"p"},"Y"),"/",Object(r.b)("inlineCode",{parentName:"p"},"n")," to enable the pipeline to scan the image for vulnerabilities.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Provide ",Object(r.b)("inlineCode",{parentName:"p"},"/api/stock-items")," as the health endpoint.  This is needed by the pipeline when running the ",Object(r.b)("strong",{parentName:"p"},"health")," Task.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"After the pipeline has been created, the command will set up a webhook from the Git host to the pipeline event listener"),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Note:")," If the webhook registration step fails it is likely because the Git credentials are incorrect or do not have enough permission in the repository."),Object(r.b)("p",{parentName:"li"},"The pipeline will be registered in your development cluster.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"View your application pipeline"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"oc console\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"From menu on the left switch to the ",Object(r.b)("strong",{parentName:"p"},"Developer")," mode and select ",Object(r.b)("em",{parentName:"p"},"dev")," project that was used for the application pipeline registration.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"In the left menu, select ",Object(r.b)("em",{parentName:"p"},"Pipelines")," and click on the link to the ",Object(r.b)("inlineCode",{parentName:"p"},"inventory-mgmt-ace-solution-xxxxxx")," PipelineRun (PLR).")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Validate the App Connect server is working correctly in the terminal."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"curl http://$(oc get route inventory-mgmt-ace-solution-http -o jsonpath='{ .spec.host }')/api/stock-items\n")),Object(r.b)("p",{parentName:"li"},"The response should be similar to the following output."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre"},'[{"name":"Item 1","id":"1","stock":100,"price":10.5,"manufacturer":"Sony"},{"name":"Item 2","id":"2","stock":150,"price":100.0,"manufacturer":"Insignia"},{"name":"Item 3","id":"3","stock":10,"price":1000.0,"manufacturer":"Panasonic"},{"name":"Item 4","id":"4","stock":9,"price":990.0,"manufacturer":"JVC"}]\n')))),Object(r.b)("p",null,"Here is a view of a completed and successful pipelinerun.\n",Object(r.b)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(r.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"12.847222222222221%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAf0lEQVQI12XO0Q7DIAgFUP//O9fZIirog2ui3qnLmnR7IDecAMFYa3G+TrTWVvXWUWu98tf+5nq/+pmmlALrnkg5gYPDwTtyzthoW+aG7WShqstijCBPICZoGnY8ls29uW80Cbx4RA1rYOJMH78m6+jHGEECRAUcHVIaT9yM8QY9QeZM2UlG5gAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(r.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Tekton pipeline",title:"Tekton pipeline",src:"/static/e4c8790bb6d61570138ae7c75bf87d44/3cbba/CNTK-ACE-Pipeline.png",srcSet:["/static/e4c8790bb6d61570138ae7c75bf87d44/7fc1e/CNTK-ACE-Pipeline.png 288w","/static/e4c8790bb6d61570138ae7c75bf87d44/a5df1/CNTK-ACE-Pipeline.png 576w","/static/e4c8790bb6d61570138ae7c75bf87d44/3cbba/CNTK-ACE-Pipeline.png 1152w","/static/e4c8790bb6d61570138ae7c75bf87d44/66010/CNTK-ACE-Pipeline.png 1377w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    ")))}h.isMDXComponent=!0},BAC9:function(e,t,a){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},I8xM:function(e,t,a){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},QH2O:function(e,t,a){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",darkMode:"PageHeader-module--dark-mode--hBrwL",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}},XbGe:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),r=a("NmYn"),p=a.n(r),l=a("Wbzz"),o=a("Xrax"),c=a("k4MR"),b=a("TSYQ"),s=a.n(b),m=a("QH2O"),d=a.n(m),g=a("qKvR"),h=function(e){var t,a=e.title,n=e.theme,i=e.tabs,r=void 0===i?[]:i;return Object(g.b)("div",{className:s()(d.a.pageHeader,(t={},t[d.a.withTabs]=r.length,t[d.a.darkMode]="dark"===n,t))},Object(g.b)("div",{className:"bx--grid"},Object(g.b)("div",{className:"bx--row"},Object(g.b)("div",{className:"bx--col-lg-12"},Object(g.b)("h1",{id:"page-title",className:d.a.text},a)))))},u=a("BAC9"),N=function(e){var t=e.relativePagePath,a=e.repository,n=Object(l.useStaticQuery)("1364590287").site.siteMetadata.repository,i=a||n,r=i.baseUrl,p=i.subDirectory,o=r+"/edit/"+i.branch+p+"/src/pages"+t;return r?Object(g.b)("div",{className:"bx--row "+u.row},Object(g.b)("div",{className:"bx--col"},Object(g.b)("a",{className:u.link,href:o},"Edit this page on GitHub"))):null},O=a("dI71"),j=a("I8xM"),A=function(e){function t(){return e.apply(this,arguments)||this}return Object(O.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.tabs,a=e.slug,n=a.split("/").filter(Boolean).slice(-1)[0],i=t.map((function(e){var t,i=p()(e,{lower:!0,strict:!0}),r=i===n,o=new RegExp(n+"/?(#.*)?$"),c=a.replace(o,i);return Object(g.b)("li",{key:e,className:s()((t={},t[j.selectedItem]=r,t),j.listItem)},Object(g.b)(l.Link,{className:j.link,to:""+c},e))}));return Object(g.b)("div",{className:j.tabsContainer},Object(g.b)("div",{className:"bx--grid"},Object(g.b)("div",{className:"bx--row"},Object(g.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(g.b)("nav",null,Object(g.b)("ul",{className:j.list},i))))))},t}(i.a.Component),f=a("MjG9"),y=a("CzIb");t.a=function(e){var t=e.pageContext,a=e.children,n=e.location,i=e.Title,r=t.frontmatter,b=void 0===r?{}:r,s=t.relativePagePath,m=t.titleType,d=b.tabs,u=b.title,O=b.theme,j=b.description,v=b.keywords,w=Object(y.a)().interiorTheme,k=Object(l.useStaticQuery)("223705900").site.pathPrefix,C=k?n.pathname.replace(k,""):n.pathname,T=d?C.split("/").filter(Boolean).slice(-1)[0]||p()(d[0],{lower:!0}):"",x=O||w;return Object(g.b)(c.a,{tabs:d,homepage:!1,theme:x,pageTitle:u,pageDescription:j,pageKeywords:v,titleType:m},Object(g.b)(h,{title:i?Object(g.b)(i,null):u,label:"label",tabs:d,theme:x}),d&&Object(g.b)(A,{slug:C,tabs:d,currentTab:T}),Object(g.b)(f.a,{padded:!0},a,Object(g.b)(N,{relativePagePath:s})),Object(g.b)(o.a,null))}}}]);
//# sourceMappingURL=component---src-pages-learning-ace-pipeline-index-mdx-55d8fd7c3e017272b5ca.js.map