(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{BAC9:function(e,a,t){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},I8xM:function(e,a,t){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},QH2O:function(e,a,t){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",darkMode:"PageHeader-module--dark-mode--hBrwL",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}},XbGe:function(e,a,t){"use strict";var n=t("q1tI"),r=t.n(n),c=t("NmYn"),l=t.n(c),i=t("Wbzz"),s=t("Xrax"),o=t("k4MR"),m=t("TSYQ"),p=t.n(m),b=t("QH2O"),d=t.n(b),g=t("qKvR"),y=function(e){var a,t=e.title,n=e.theme,r=e.tabs,c=void 0===r?[]:r;return Object(g.b)("div",{className:p()(d.a.pageHeader,(a={},a[d.a.withTabs]=c.length,a[d.a.darkMode]="dark"===n,a))},Object(g.b)("div",{className:"bx--grid"},Object(g.b)("div",{className:"bx--row"},Object(g.b)("div",{className:"bx--col-lg-12"},Object(g.b)("h1",{id:"page-title",className:d.a.text},t)))))},u=t("BAC9"),f=function(e){var a=e.relativePagePath,t=e.repository,n=Object(i.useStaticQuery)("1364590287").site.siteMetadata.repository,r=t||n,c=r.baseUrl,l=r.subDirectory,s=c+"/edit/"+r.branch+l+"/src/pages"+a;return c?Object(g.b)("div",{className:"bx--row "+u.row},Object(g.b)("div",{className:"bx--col"},Object(g.b)("a",{className:u.link,href:s},"Edit this page on GitHub"))):null},A=t("dI71"),O=t("I8xM"),h=function(e){function a(){return e.apply(this,arguments)||this}return Object(A.a)(a,e),a.prototype.render=function(){var e=this.props,a=e.tabs,t=e.slug,n=t.split("/").filter(Boolean).slice(-1)[0],r=a.map((function(e){var a,r=l()(e,{lower:!0,strict:!0}),c=r===n,s=new RegExp(n+"/?(#.*)?$"),o=t.replace(s,r);return Object(g.b)("li",{key:e,className:p()((a={},a[O.selectedItem]=c,a),O.listItem)},Object(g.b)(i.Link,{className:O.link,to:""+o},e))}));return Object(g.b)("div",{className:O.tabsContainer},Object(g.b)("div",{className:"bx--grid"},Object(g.b)("div",{className:"bx--row"},Object(g.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(g.b)("nav",null,Object(g.b)("ul",{className:O.list},r))))))},a}(r.a.Component),j=t("MjG9"),v=t("CzIb");a.a=function(e){var a=e.pageContext,t=e.children,n=e.location,r=e.Title,c=a.frontmatter,m=void 0===c?{}:c,p=a.relativePagePath,b=a.titleType,d=m.tabs,u=m.title,A=m.theme,O=m.description,N=m.keywords,k=Object(v.a)().interiorTheme,x=Object(i.useStaticQuery)("223705900").site.pathPrefix,w=x?n.pathname.replace(x,""):n.pathname,C=d?w.split("/").filter(Boolean).slice(-1)[0]||l()(d[0],{lower:!0}):"",E=A||k;return Object(g.b)(o.a,{tabs:d,homepage:!1,theme:E,pageTitle:u,pageDescription:O,pageKeywords:N,titleType:b},Object(g.b)(y,{title:r?Object(g.b)(r,null):u,label:"label",tabs:d,theme:E}),d&&Object(g.b)(h,{slug:w,tabs:d,currentTab:C}),Object(g.b)(j.a,{padded:!0},t,Object(g.b)(f,{relativePagePath:p})),Object(g.b)(s.a,null))}},szAz:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return s})),t.d(a,"default",(function(){return b}));var n,r=t("wx14"),c=t("zLVn"),l=(t("q1tI"),t("7ljp")),i=t("XbGe"),s=(t("T0C+"),t("qKvR"),{}),o=(n="PageDescription",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),Object(l.b)("div",e)}),m={_frontmatter:s},p=i.a;function b(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(l.b)(p,Object(r.a)({},m,t,{components:a,mdxType:"MDXLayout"}),Object(l.b)(o,{mdxType:"PageDescription"},Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"This is a work in progress, come back for updates.")),Object(l.b)("p",null,"Steps to install App Connect in an existing cluster using ArgoCD.")),Object(l.b)("h2",null,"Installation"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Fork the ",Object(l.b)("a",{parentName:"p",href:"https://github.com/cloud-native-toolkit/multi-tenancy-gitops"},"multi-tenancy-gitops")," repository and clone your fork."),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"git clone git@github.com:{gitid}/multi-tenancy-gitops.git\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Install the Red Hat OpenShift GitOps operator."),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"cd multi-tenancy-gitops\n\noc apply -f 2-services/operators/openshift-gitops/\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Update your repository to reference your forked repository.  Search and replace ",Object(l.b)("inlineCode",{parentName:"p"},"cloud-native-toolkit")," GithUb Org references with your {gitid}.")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Create the bootstrap ArgoCD application."),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"oc apply -f bootstrap.yaml -n openshift-gitops\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Generate an encrypted Secret containing the IBM Entitlement Key using Sealed Secret Operator.")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Install ",Object(l.b)("a",{parentName:"p",href:"https://github.com/bitnami-labs/sealed-secrets/blob/main/README.md"},"kubeseal")," CLI.")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Encrypt IBM Entitlement Key Secret."),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"NAMESPACE=tools\nIBM_ENTITLEMENT_KEY=<Entitlement Key>\n\n# Create Secret YAML containing Entitlement Key\noc create secret docker-registry ibm-entitlement-key \\\n--docker-username=cp \\\n--docker-server=cp.icr.io \\\n--docker-password=${IBM_ENTITLEMENT_KEY} \\\n--namespace=${NAMESPACE} \\\n--dry-run=true -o yaml > delete-ibm-entitled-key-secret.yaml\n\n# Encrypt the secret using kubeseal and private key from the cluster\nkubeseal -n ${NAMESPACE} --controller-name=sealedsecretcontroller-sealed-secrets --controller-namespace=sealed-secrets -o yaml < delete-ibm-entitled-key-secret.yaml > ibm-entitled-key-secret.yaml\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Apply the yaml manually or add to your gitops git repo to be deploy via ArgoCD."),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"oc apply -f enc-ibm-entitled-key-secret.yaml\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Verify the infrastructure and cluster wide resources under the ",Object(l.b)("inlineCode",{parentName:"p"},"3-infra")," folder are created successfully."),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre"},"3-infra/\n├── argocd-apps\n│   ├── consolelink.yaml\n│   ├── consolenotification.yaml\n│   ├── namespace-ci.yaml\n│   ├── namespace-dev.yaml\n│   ├── namespace-istio-system.yaml\n│   ├── namespace-openldap.yaml\n│   ├── namespace-qa.yaml\n│   ├── namespace-sealed-secrets.yaml\n│   ├── namespace-staging.yaml\n│   └── namespace-tools.yaml\n├── consolelink\n│   └── consolelink.yaml\n├── consolenotification\n│   └── consolenotification.yaml\n└── namespaces\n    ├── ci\n    │   ├── namespace.yaml\n    │   └── rolebinding.yaml\n    ├── dev\n    │   └── namespace.yaml\n    ├── istio-system\n    │   └── namespace.yaml\n    ├── openldap\n    │   └── namespace.yaml\n    ├── qa\n    │   └── namespace.yaml\n    ├── sealed-secrets\n    │   ├── namespace.yaml\n    │   └── operatorgroup.yaml\n    ├── staging\n    │   └── namespace.yaml\n    └── tools\n        ├── namespace.yaml\n        └── operatorgroup.yaml\n")),Object(l.b)("span",{parentName:"li",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(l.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"46.18055555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGklEQVQoz3WSWZKDMAxEc/9rZioBwmIZvGFIj2RsyiEzH10GZL1q0br9kMIaIrSx8GFFWGOS9QGzcVisg9JLOtM76zUSHq8JDeupCMS9a9yguHYTYGTAzB+t91yIqShwwxDrPGg26TRZg5rRjSqBW9LQfG/fdpBNQEJkgDgQkCieQJ+cFocFOJIACf2k0eka6A+HGwPEoYDidqh2KDXHYHmWKWpgm4Hv/c0nA+8VUCA1cMlAcWiqkXul0QwTukHhyROStQzcL0BuljAO4P7hsIxc1E+Epp/Q9goNA3UCZoclFLnoQkihxK9QPv/hwA5bdicO/w0lpez8n0Cl5wuwSvkayl0deygN33tozz2UxMvIB5DOtaEcqOzhL5k4uEba7hvTAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(l.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"ArgoCD deployments of 3-infra",title:"ArgoCD deployments of 3-infra",src:"/static/a2f2cd3edf1c5312b18e59d200920dcc/3cbba/argocd-cntk-3-infra.png",srcSet:["/static/a2f2cd3edf1c5312b18e59d200920dcc/7fc1e/argocd-cntk-3-infra.png 288w","/static/a2f2cd3edf1c5312b18e59d200920dcc/a5df1/argocd-cntk-3-infra.png 576w","/static/a2f2cd3edf1c5312b18e59d200920dcc/3cbba/argocd-cntk-3-infra.png 1152w","/static/a2f2cd3edf1c5312b18e59d200920dcc/2e86f/argocd-cntk-3-infra.png 1516w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    ")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Verify the operators and instances of custom resource definitions under the ",Object(l.b)("inlineCode",{parentName:"p"},"2-services")," folder are created successfully."),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre"},"2-services/\n├── active\n│   ├── instances\n│   │   └── argocd\n│   └── operators\n│       └── argocd\n└── inactive\n    ├── instances\n    │   ├── argocd\n    │   │   ├── artifactory.yaml\n    │   │   ├── cert-manager-instance.yaml\n    │   │   ├── cntk-pipeline-tasks.yaml\n    │   │   ├── developer-dashboard.yaml\n    │   │   ├── ibm-mq-prod-instance.yaml\n    │   │   ├── ibm-mq-staging-instance.yaml\n    │   │   ├── ibm-platform-navigator-instance.yaml\n    │   │   ├── openldap.yaml\n    │   │   ├── pact-broker.yaml\n    │   │   ├── sealed-secrets-instance.yaml\n    │   │   ├── sonarqube.yaml\n    │   │   └── swaggereditor.yaml\n    │   ├── artifactory\n    │   │   ├── Chart.yaml\n    │   │   └── values.yaml\n    │   ├── cert-manager\n    │   │   └── instance.yaml\n    │   ├── cloud-native-toolkit\n    │   │   └── release-v2.6.10.yaml\n    │   ├── dev\n    │   ├── developer-dashboard\n    │   │   ├── Chart.yaml\n    │   │   └── values.yaml\n    │   ├── ibm-platform-navigator\n    │   │   └── ibm-platform-navigator.yaml\n    │   ├── openldap\n    │   │   ├── Chart.yaml\n    │   │   └── values.yaml\n    │   ├── pact-broker\n    │   │   ├── Chart.yaml\n    │   │   └── values.yaml\n    │   ├── prod\n    │   ├── sealed-secrets\n    │   │   └── instance.yaml\n    │   ├── sonarqube\n    │   │   ├── Chart.yaml\n    │   │   └── values.yaml\n    │   ├── staging\n    │   └── swaggereditor\n    │       ├── Chart.yaml\n    │       └── values.yaml\n    └── operators\n        ├── argocd\n        │   ├── cert-manager.yaml\n        │   ├── ibm-catalogs.yaml\n        │   ├── ibm-cp4i-operators.yaml\n        │   ├── ibm-foundations.yaml\n        │   ├── ibm-platform-navigator.yaml\n        │   ├── jaeger.yaml\n        │   ├── openshift-pipelines.yaml\n        │   └── sealed-secrets.yaml\n        ├── cert-manager\n        │   └── operator.yaml\n        ├── ibm-catalogs\n        │   ├── Chart.yaml\n        │   └── values.yaml\n        ├── ibm-cp4i-operators\n        │   ├── Chart.yaml\n        │   └── values.yaml\n        ├── ibm-foundation\n        │   ├── Chart.yaml\n        │   └── values.yaml\n        ├── ibm-platform-navigator\n        │   ├── Chart.yaml\n        │   └── values.yaml\n        ├── jaeger\n        │   ├── Chart.yaml\n        │   └── values.yaml\n        ├── openshift-pipelines\n        │   └── operator.yaml\n        └── sealed-secrets\n            ├── Chart.yaml\n            └── values.yaml\n")),Object(l.b)("span",{parentName:"li",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(l.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"45.833333333333336%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQ0lEQVQoz3WS4W6EIBCEff/XrEn16gkLCp6g2xnAemnTHxtc1I+ZWbperO57Ur8GfWFl7Slp3F66hKhr2NT6BWssPevLOB2eVh+oQUQlBM05q6xRu96J5pQBjADlUgkvt9eua9wK2LpF/RI0oGfN4gEVnQB+OKcuRj2OA+BNuw8oJFCWtUAIu4BUUwGuQAsQBzyt18cMIGrAOweF53FifQM6AGk3pf+AvkaAnsrGZvnTVssnFP4B3gqPajlQ0aYGFgU51kxjsTs8jY5TzdBh70dhj40EZRfwyrECq0LjKnBtGU72VjgWyxFDYYYcChQSyAyp4ILGZpkQ+6aO/XuGY8vwBmLKBwD8cC9XJmtGHswztClLuzYcCPvfU/aY8nmeWJmhMQVmfLUcWy3IQ7DncD/5M6fMZ1/6y7KUocw4kAJmXK1vUQq3wkysGOcAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(l.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"ArgoCD deployments of 2-services",title:"ArgoCD deployments of 2-services",src:"/static/61883872bf8295e3bd291472d2adbc7e/3cbba/argocd-ace-2-services.png",srcSet:["/static/61883872bf8295e3bd291472d2adbc7e/7fc1e/argocd-ace-2-services.png 288w","/static/61883872bf8295e3bd291472d2adbc7e/a5df1/argocd-ace-2-services.png 576w","/static/61883872bf8295e3bd291472d2adbc7e/3cbba/argocd-ace-2-services.png 1152w","/static/61883872bf8295e3bd291472d2adbc7e/2e86f/argocd-ace-2-services.png 1516w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "))))}b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-learning-gitops-int-gitops-with-app-connect-mdx-75f3bf205b1a52400124.js.map