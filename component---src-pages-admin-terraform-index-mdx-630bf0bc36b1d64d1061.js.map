{"version":3,"sources":["webpack:///./src/pages/admin/terraform/index.mdx"],"names":["name","_frontmatter","PageDescription","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-admin-terraform-index-mdx-630bf0bc36b1d64d1061.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/ibm-garage-developer-guide/ibm-garage-developer-guide/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\n    </PageDescription>\n    <h2>{`Overview`}</h2>\n    <p><inlineCode parentName=\"p\">{`Infrastructure as Code`}</inlineCode>{` is the practice of defining and managing the logic used to provision infrastructure as versioned\nartifacts in the same way that code artifacts have traditionally been handled. There are a number of different tools and\nframeworks available that enable this type of approach. The IBM Garage for Cloud Developer Tools currently leverage\nTerraform as the technology used to implement the Infrastructure as Code strategy.`}</p>\n    <p>{`The IasC terraform logic is stored in two repositories:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`garage-terraform-modules`}</inlineCode></p>\n        <p parentName=\"li\">{`  The modules that provide logic to provision individual components of the infrastructure. These modules cover one of\nthree different categories: infrastructure (e.g. create a kubernetes cluster), cloud service, or software deployed and\nconfigured into a cluster. `}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-garage-cloud/garage-terraform-modules\"\n          }}>{`https://github.com/ibm-garage-cloud/garage-terraform-modules`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`ibm-garage-iteration-zero`}</inlineCode></p>\n        <p parentName=\"li\">{`  The logic that makes use of the modules with specific configuration parameters used to deliver an entire solution.\n`}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-garage-cloud/ibm-garage-iteration-zero\"\n          }}>{`https://github.com/ibm-garage-cloud/ibm-garage-iteration-zero`}</a></p>\n      </li>\n    </ul>\n    <p>{`This guide will walk through the various files that make up the Infrastructure as Code components and how to\ncustomize them. The `}<a parentName=\"p\" {...{\n        \"href\": \"/admin\"\n      }}>{`Installation Overview`}</a>{` walks through how to perform an install with the Iteration Zero\nscripts.`}</p>\n    <h2>{`Iteration Zero terraform scripts`}</h2>\n    <p>{`The Iteration Zero terraform scripts make use of the modules to provision and prepare an environment. The logic is\nprovided as `}<inlineCode parentName=\"p\">{`stages`}</inlineCode>{` that can be removed and added as needed.`}</p>\n    <h3>{`Stages`}</h3>\n    <p>{`The files in the `}<inlineCode parentName=\"p\">{`stages`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`stages-crc`}</inlineCode>{` folders provide Terraform files that make use of external\nTerraform modules to provision resources. The different resources are logically grouped with stage numbers\nand names for the resource provided. All of the stages are processed by the Terraform apply at the same\ntime and Terraform works out the sequencing of execution based on the dependencies between the modules.`}</p>\n    <p>{`The Iteration Zero application comes with a pre-defined set of software and services that will be\nprovisioned. For more advanced situations, that set of modules can be easily customized.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Removing a stage`}</p>\n        <p parentName=\"li\">{`  To remove a stage, simply delete or move a file out of the stages directory`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Adding a stage`}</p>\n        <p parentName=\"li\">{`  To add a stage, define a new stage file and reference the desired module. Any necessary variables\ncan be referenced from the base variables or the output from the other modules.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Modifying a stage`}</p>\n        <p parentName=\"li\">{`  Any of the values for the variables in `}<inlineCode parentName=\"p\">{`variables.tf`}</inlineCode>{` or in the stage files can be updated to change\nthe results of what is built`}</p>\n      </li>\n    </ul>\n    <h3>{`Environment configuration`}</h3>\n    <p>{`There a number of files used to provide the overall configuration for the environment that will be\nprovisioned.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`credentials.template`}</inlineCode></p>\n        <p parentName=\"li\">{`  Template file for the credentials.properties`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`credentials.properties`}</inlineCode></p>\n        <p parentName=\"li\">{`  File containing the API key and Classic Infrastructure credentials needed to run the scripts`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`terraform/settings/environment.tfvars`}</inlineCode></p>\n        <p parentName=\"li\">{`  General configuration values for the environment, like `}<inlineCode parentName=\"p\">{`region`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`resource group`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`cluster type`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`terraform/settings/vlan.tfvars`}</inlineCode></p>\n        <p parentName=\"li\">{`  Configuration values for the IBM Cloud vlan settings needed for the creation of a new cluster`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`terraform/stages/variables.tf`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`terraform/stages-crc/variables.tf`}</inlineCode></p>\n        <p parentName=\"li\">{`  Defined variables for the various stages and, in some cases, default values.`}</p>\n      </li>\n    </ul>\n    <h3>{`Scripts`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`launch.sh`}</inlineCode></p>\n        <p parentName=\"li\">{`  Launches a container image from the Docker Hub registry that contains all the tools necessary to run\nthe terraform scripts and opens into a shell where the Terraform logic can be run`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`terraform/runTerraform.sh`}</inlineCode></p>\n        <p parentName=\"li\">{`  Based on the values configured in `}<inlineCode parentName=\"p\">{`environment.tfvars`}</inlineCode>{`, this script creates the `}<inlineCode parentName=\"p\">{`terraform/workspace`}</inlineCode>{`\ndirectory, copies the appropriate Terraform files into that directory, then applies the Terraform\nscripts`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`terraform/scripts/apply.sh`}</inlineCode></p>\n        <p parentName=\"li\">{`  Applies the Terraform scripts. This script is copied into the `}<inlineCode parentName=\"p\">{`terraform/workspace`}</inlineCode>{` directory during the\n`}<inlineCode parentName=\"p\">{`runTerraform.sh`}</inlineCode>{` logic. It is then available to rerun the Terraform logic without having to set\nthe `}<inlineCode parentName=\"p\">{`terraform/workspace`}</inlineCode>{` directory up again.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`terraform/scripts/destroy-cluster.sh`}</inlineCode></p>\n        <p parentName=\"li\">{`  Helper script that destroys the IBM Cloud cluster to clean up the environment`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`terraform/scripts/destroy-services.sh`}</inlineCode></p>\n        <p parentName=\"li\">{`  Helper script that destroys services that have been provisioned in IBM Cloud. It works against\nthe `}<inlineCode parentName=\"p\">{`resource group`}</inlineCode>{` that has been configured in the `}<inlineCode parentName=\"p\">{`environment.tfvars`}</inlineCode>{` file. Any values passed\nin as arguments will be used to do a regular expression match to `}<strong parentName=\"p\">{`exclude`}</strong>{` services from the\nlist of those that will be destroyed.`}</p>\n      </li>\n    </ul>\n    <h2>{`Garage Terraform Modules`}</h2>\n    <p>{`The terraform modules project contains the building block components that can be used to create a\nprovisioned environment. The modules are organized into one of three major categories:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`cloud-managed`}</inlineCode></p>\n        <p parentName=\"li\">{`  Modules that provision infrastructure (cluster and/or services) into a managed cloud environment`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`self-managed`}</inlineCode></p>\n        <p parentName=\"li\">{`  Modules that provision infrastructure into a self-managed environment (e.g. software deployed\ninto a cluster)`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`generic`}</inlineCode></p>\n        <p parentName=\"li\">{`  Modules that can be applied independent of the environment (e.g. software that is installed\ninto a running kubernetes environment)`}</p>\n      </li>\n    </ul>\n    <p>{`A listing of the modules is shown below:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"53.125%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACzUlEQVQoz3VSS2gTURR9SaptQSlSqnUhKlaqbhR0IbpQEDdCFcSiBSlqWyi10BYXouBKF0IXFkXECkGqBYVaa8EsCrEx1Da/JiYxyeQzTTLNdyaZmTczmbSdJs83U5Uu6tncd+fde9459w4Yfvm+6fXom2ZFUXavyULNi7fT9UMPnhz8aLLVvhqb3vbw8UhL29UbrX19fYeNRuPe/v7+Az09PSdudrTXVRDaPutaaj5/sW0PAEAHVPzwZz15uvCOYRgOFjJHbWG+20NCtBiFHb5k+Xgoo6AAVfoiCnCRZVm/IAhfRUmSUVU85I7LvQkOISJb6VK5QtHETuCMsDazjWg0mUwN6kdbqNBrD9ElHK+FstVjrggHf5L8OEPnzfl8/jvP82Msy5GoCve7l+QuZ4STyGzp+eqKPBeLxRaAK8ofAZswH6Cb7KHCqalvvtpAau2kK8ox3iU4ViwyMzTNmDHhNCaUECq3zP1iOm1BesUepG8hxNZxUGrWSMzDF4Ddbgfz3vhmbhBIr531U2XV8pQkCQ4IoV8UxXMluXxJvfcm5MFQdh0RFHxWUVZHrVbrBHCTgm7GC8EyldRIHGEeq4Y16hnP8TS2LC1Gih+wZUsul3O1Xb6i//ugLykPuElYDVLCo7IEb89aLPfAVnCEWa3JGebOYPuKM0R/ymUz86lU2ksQ4Ya8ggzag6TUuxBkVpyk3P6vmaIoHYQCQAjpAnEWuMiSzk+taoTBzHqrL1GaCC7L9yVReIotjxRZts4SRdovEs2U7kZSAsKxc2PLVC34H+LFjaatgMm1kQiQH8JCEM7vqHllXTGoyhoIgtj1eXJyHz7vIHPlRqpYqVcLYnQF2y4YgpSoF0VBz3GcHtcAWZY1y7Jc7sZL4nG8rub4zgA8Ho8jkUiOZ9LLYTeRM5rdacHqowfUgllPWr+VQrycmj9xEBMiHDWFeCSG33tZ7W0wq3ljAAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"modules\",\n        \"title\": \"modules\",\n        \"src\": \"/static/41198ab6e011ad020a40277d7562ff9c/3cbba/modules.png\",\n        \"srcSet\": [\"/static/41198ab6e011ad020a40277d7562ff9c/7fc1e/modules.png 288w\", \"/static/41198ab6e011ad020a40277d7562ff9c/a5df1/modules.png 576w\", \"/static/41198ab6e011ad020a40277d7562ff9c/3cbba/modules.png 1152w\", \"/static/41198ab6e011ad020a40277d7562ff9c/b5ff4/modules.png 1281w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}